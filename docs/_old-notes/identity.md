---
title: Identity Type Family
date: 8 March 2019
---

The _identity inductive type family_ is one of the most subtle parts of Type Theory, and is core of the link to topology. Here we clarify the definition and some basic properties. Note that there is no additional rule required for this - instead its rich structure depends on the power of induction for indexed types.

## The definition

Fix a type $A$. We define $Id\_A : A \\to A \\to \\mathcal{U}$ as follows:

__Definition:__ $Id\_A : A \\to A \\to \\mathcal{U}$ is the _indexed inductive type family_ freely generated by

* $refl_A : \\prod\_{a : A} Id\_A (a)(a)$

We also denote $Id\_A(p)(q)$ as $p =\_A q$ or simply $p = q.

## Induction principle

Fix a type $A$. Informally, the induction principle for the indexed identity type family says that to define a dependent function $f$ on all elements of the family $Id_A$, i.e. triples $(p : A, q : A, \\alpha: p =\_A q)$ it suffices to define $f$ on triples where $p=q$ and $\\alpha= refl\_A (p)$.

Formally, a type family $Q$ on $Id\_A$ is a term $Q : \\prod\_{p, q: A} Id\_A(p)(q) \to \\mathcal{U}$, i.e. for $p, q: A$ and $\\alpha : p =\_A q$ we get a type $Q(p)(q)(\\alpha)$.
The induction principle (which is an instance of the general rule for indexed types) says that given such a family $Q$, we can introduce a term

$$ind_{Id_A, Q}: (\prod_{p: A} Q(p)(p)(refl_A(p)))  \to (\prod_{p, q: A}\prod_{\alpha: p =_A q} Q(p)(q)(\alpha)).$$

Furthermore, if $\\varphi: \\prod\_{p: A} Q(p)(p)(refl\_A(p))$ (i.e., $\\varphi$ is the data for the inductive definition) and $p_0: A$, then

$$(ind_{Id_A, Q}(\varphi))(p_0)(p_0)(refl_A(p_0)) \equiv \varphi(p_0).$$

We typically use the induction function by giving as _input_ a term in the domain, which corresponds to $p=q$ and $\\alpha= refl\_A (p)$.

### Symmetry

Our first application illustrating this is to show symmetry of equality. Symmetry corresponds to the type

$$\mathcal{S}_A = \prod_{p, q: A} p =_A q \to q =_A p,$$

which we can also write as

$$\mathcal{S}_A = \prod_{p, q: A} \prod_{\alpha: p =_A q}  q =_A p.$$

The second form corresponds to the type family $Q = (p: A) \\mapsto (q: A) \\mapsto (\\alpha: p =\_A q) \\mapsto q =\_A p$, i.e. we have

$$ind_{Id_A, Q} : (\prod_{p: A} p =_A p) \to \mathcal{S}_A.$$

Hence, we just have to give as argument a term in the domain of this function. Indeed, we can define

$$\sigma_A  := ind_{Id_A, Q}(refl_A) $$

and see that $\\sigma_A : \\mathcal{S}\_A$. Thus we have a term that proves symmetry.

We also observe that the identity $\\sigma\_A(p)(refl\_A(p))\equiv refl\_A(p)$.

__Topology:__ The operation $\\sigma\_A$ is reversing the direction of a path. The identity says that reversing a constant path gives itself.

### Transitivity

To make our life easier, we formulate a type corresponding to _transitivity_ in a slightly unnatural form. It is an exercise to construct a function from this to a more natural form - such a function is a proof that our formulation implies the natural one.

Namely, we define the type

$$\mathcal{T}_A := \prod_{p, q: A}\prod_{\alpha : p =_A q} \prod_{r: A} \prod_{\beta : q =_A r} p =_A r. $$

This corresponds to the type family

$$Q_1 = (p: A) \mapsto (q: A) \mapsto (\alpha: p =_A q) \mapsto \prod_{r: A} \prod_{\beta : q =_A r} p =_A r,$$

in the sense that (as $Q_1(p)(p)(refl_A(p)) = \\prod\_{r: A} \\prod\_{\\beta : p =_A r} p =_A r$) $\mathcal{T}_A$ is the codomain of the induction function

$$ind_{Id_A, Q_1} : (\prod_{p: A} \prod_{r: A} \prod_{\beta : p =_A r} p =_A r) \to \mathcal{T}_A$$

To construct an element of $\\mathcal{T}\_A$, we need to construct an element of the domain $D = \\prod\_{p: A} \\prod_{r: A} \\prod\_{\\beta : p =\_A r} p =\_A r$ of $ind\_{Id\_A, Q\_1}$. We do this by applying induction again, this time for the type family  $Q\_2 := (p: A) \\mapsto (r : A) \\mapsto (\\beta: p =_A r) \\mapsto p =\_A r$. We see that

$$ind_{Id_A, Q_2}: (\prod_{p: A} p =_A p) \to D$$

and relexivity in the domain of this induction function. Thus, we can define

$$\tau_A = ind_{Id_A, Q_1}(ind_{Id_A, Q_2}(refl_A))$$

so that $\\tau\_A : \\mathcal{T}\_A$. Thus we have proved transitivity.

__Identities:__ Since we used induction twice, it takes two steps to unravel the idenities that $\\tau\_A$ satisfies. Firstly, the induction with respect to $Q\_1$ gives the identities

$$\tau_A(p)(p)(refl_A(p)) \equiv ind_{Id_A, Q_2}(refl_A)(p).$$

 By itself this is not very useful. However we apply the identity for induction with respect to $Q\_2$ to get

 $$\tau_A(p)(p)(refl_A(p))(p)(refl_A(p)) \equiv refl_A(p).$$

This says that transitivity of two equalities by reflexivity (for a term $p: A$) is equality by reflexivity.

__Topology:__ The operation $\\tau\_A$ is joining two paths when the terminal point of the first coincides with the initial point of the second. The identity says that joining two constant paths at the same point $p : A$ gives the constant path at $p$.
